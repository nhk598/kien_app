{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\kien_app\\\\client\\\\src\\\\component\\\\watching\\\\watchingVideo_left\\\\wVideo_left_bot\\\\supportVideo\\\\connectListSp\\\\commentVideoPlaying\\\\commentFormVideo\\\\NewComment.js\",\n    _s = $RefreshSig$();\n\nimport { useMutation } from '@apollo/client';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { NEW_COMMENT } from '../../../../../../../../graphql-client/Mutation';\nimport { useState } from 'react';\nimport { COMMENT_VIDEO } from '../../../../../../../../graphql-client/Queries';\nimport { useForm } from \"react-hook-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewComment() {\n  _s();\n\n  const {\n    reset,\n    register\n  } = useForm();\n  const {\n    id\n  } = useParams();\n  const [formTextComment, setFormTextComment] = useState({\n    text: ''\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    new_comment();\n    setFormTextComment({ ...formTextComment,\n      text: \"\"\n    });\n  };\n\n  const [new_comment] = useMutation(NEW_COMMENT, {\n    // Nhập vào tham số\n    variables: {\n      // Nhập vào id của video từ id trên params\n      videoId: id,\n      // Nhập vào text của comment từ state \n      text: formTextComment.text\n    },\n    // Cập nhật bộ nhớ cache với data comment thay đổi\n    update: (cache, {\n      data: {\n        comment\n      }\n    }) => {\n      // Gán biến data với giá trị trong bộ nhớ cache từ query: \n      const data = cache.readQuery({\n        query: COMMENT_VIDEO,\n        variables: {\n          videoId: id\n        }\n      }); // Gọi lại cache tìm phần thông tin chứa query, thay thế phần thông tin với thong tin data \n\n      cache.writeQuery({\n        query: COMMENT_VIDEO,\n        data: {\n          comment: [...data.comment, comment]\n        },\n        variables: {\n          videoId: id\n        }\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex-column newComment\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"headerNewComment d-flex input-group \",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"input-group-text\",\n        id: \"basic-addon1\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"img- video_avatar\",\n          alt: \"\",\n          src: \"./gai.jpg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          style: {\n            height: '50px',\n            width: '400px'\n          },\n          className: \"form-control\",\n          placeholder: \"\\u0110\\u1EB7t c\\xE2u h\\u1ECFi ho\\u0103c b\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n...\",\n          \"aria-label\": \"Username\",\n          \"aria-describedby\": \"basic-addon1\",\n          value: formTextComment.text,\n          onChange: e => setFormTextComment({ ...formTextComment,\n            text: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn  me-md-2 ms-auto\",\n          type: \"submit\",\n          children: \"G\\u1EEDi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn \",\n          type: \"button\",\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n\n_s(NewComment, \"CCn+qRleIfrV1pRiZ0lC32OgK88=\", false, function () {\n  return [useForm, useParams, useMutation];\n});\n\n_c = NewComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewComment\");","map":{"version":3,"sources":["C:/Users/Asus/Desktop/kien_app/client/src/component/watching/watchingVideo_left/wVideo_left_bot/supportVideo/connectListSp/commentVideoPlaying/commentFormVideo/NewComment.js"],"names":["useMutation","React","useParams","NEW_COMMENT","useState","COMMENT_VIDEO","useForm","NewComment","reset","register","id","formTextComment","setFormTextComment","text","handleSubmit","e","preventDefault","new_comment","variables","videoId","update","cache","data","comment","readQuery","query","writeQuery","height","width","target","value"],"mappings":"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","sourcesContent":["import { useMutation } from '@apollo/client'\r\nimport React from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport {NEW_COMMENT} from '../../../../../../../../graphql-client/Mutation'\r\nimport { useState } from 'react'\r\nimport { COMMENT_VIDEO } from '../../../../../../../../graphql-client/Queries'\r\nimport { useForm } from \"react-hook-form\";\r\nexport default function NewComment() {\r\n    const { reset, register} = useForm();\r\n    \r\n    const {id} = useParams()\r\n    const [formTextComment, setFormTextComment] = useState({text:''})\r\n    const handleSubmit = (e)=> {\r\n        e.preventDefault();\r\n        new_comment();\r\n        setFormTextComment({\r\n            ...formTextComment,text:\"\"\r\n          })\r\n      };\r\n    \r\n    const [new_comment] = useMutation(NEW_COMMENT, {\r\n        // Nhập vào tham số\r\n        variables:{\r\n            // Nhập vào id của video từ id trên params\r\n            videoId: id, \r\n            // Nhập vào text của comment từ state \r\n            text: formTextComment.text\r\n        },\r\n        // Cập nhật bộ nhớ cache với data comment thay đổi\r\n        \r\n        update:(cache, {data:{comment}})=>{\r\n            // Gán biến data với giá trị trong bộ nhớ cache từ query: \r\n            const data = cache.readQuery({\r\n                query: COMMENT_VIDEO,\r\n                variables: {videoId:id}\r\n                \r\n            });\r\n            // Gọi lại cache tìm phần thông tin chứa query, thay thế phần thông tin với thong tin data \r\n            cache.writeQuery({\r\n                query: COMMENT_VIDEO,\r\n                data:{\r\n                      comment: [...data.comment, comment]}\r\n                ,\r\n                variables: {videoId:id}\r\n            }); \r\n        },   \r\n    })\r\n    return (\r\n        <div className=\"d-flex-column newComment\">\r\n            <div className=\"headerNewComment d-flex input-group \">\r\n                <span className=\"input-group-text\" id=\"basic-addon1\">\r\n                <img className=\"img- video_avatar\" alt=\"\" src=\"./gai.jpg\" />\r\n                </span>\r\n                <form\r\n                    onSubmit={handleSubmit}\r\n                    >\r\n                        <input type=\"text\" style={{height: '50px', width:'400px'}} className=\"form-control\" placeholder=\"Đặt câu hỏi hoăc bình luận của bạn...\" aria-label=\"Username\" aria-describedby=\"basic-addon1\" \r\n                        value={formTextComment.text}\r\n                        onChange={(e) =>\r\n                          setFormTextComment({\r\n                            ...formTextComment,text:e.target.value\r\n                          })\r\n                        }\r\n                        />\r\n                        {/* <div className=\"d-flex \" style={{marginTop: '10px'}}> */}\r\n                            <button className=\"btn  me-md-2 ms-auto\" type= \"submit\" >Gửi</button>\r\n                            <button className=\"btn \" type=\"button\">Hủy</button>\r\n                        {/* </div> */}\r\n                    </form>\r\n                \r\n            </div>\r\n            \r\n            </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}